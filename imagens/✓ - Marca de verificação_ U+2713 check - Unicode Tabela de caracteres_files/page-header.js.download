document.addEventListener("DOMContentLoaded",function (){function calculateRightBound(item){return item.offsetLeft + item.offsetWidth;};function moveItemIntoList(item,list){list.insertBefore(item,list.firstElementChild);};function collapsibleDropdownList(){const headerMenuWrapper=document.querySelector('.js-dropdown-menu');const menuItems=Array.prototype.slice.call(headerMenuWrapper.querySelectorAll('.js-dropdown-menu-item'));const dropdownMenuButton=headerMenuWrapper.querySelector('.js-dropdown-menu-button');const outOfBoundsItems=[];for (let i=menuItems.length - 1;i >=0;i--){if (calculateRightBound(menuItems[i]) > headerMenuWrapper.offsetLeft + headerMenuWrapper.clientWidth){outOfBoundsItems.push(menuItems[i]);}else{i=-1;};};if (outOfBoundsItems.length){dropdownMenuButton.classList.add('js-enabled');const hiddenItemsList=dropdownMenuButton.querySelector('.js-dropdown-menu-list');outOfBoundsItems.forEach((item)=>{moveItemIntoList(item,hiddenItemsList);});const buttonRightBound=dropdownMenuButton.offsetLeft + dropdownMenuButton.offsetWidth;if (buttonRightBound > headerMenuWrapper.offsetLeft + headerMenuWrapper.clientWidth){moveItemIntoList(dropdownMenuButton.previousElementSibling,hiddenItemsList);};headerMenuWrapper.classList.add('js-enabled');}else{dropdownMenuButton.remove();};dropdownMenuButton.classList.add('js-processed');headerMenuWrapper.classList.add('js-processed');}collapsibleDropdownList();function scrollMenu(){const menuMobile=document.querySelector('.header');const containerSticky=document.querySelector('.js-container-sticky');const containerStickyHolidays=document.querySelector('.js-container-sticky--holidays');const adLeft=document.querySelector('.page__ad-left');const adRight=document.querySelector('.page__ad-right');const setsListContainerScroll=document.querySelector('.js-container-scroll');const setsListContainerScrollHolidays=document.querySelector('.js-container-scroll--holidays')
const elHoliday=document.querySelector('.holiday');const breakpointTablet=window.matchMedia('(min-width:1025px)');const breakpointMobile=window.matchMedia('(min-width:769px)');let lastScrollTop=0;let lastScrollBottom=0;const fixable=document.querySelectorAll('.fixable');const footer=document.querySelector('footer');const check=function (size){if (fixable){let stopPoint,startPoint;startPoint=200;fixable.forEach(function (fixableItem){stopPoint=window.pageYOffset + 100 + fixableItem.offsetHeight;if (window.pageYOffset >=startPoint && stopPoint + size < footer.offsetTop){fixableItem.classList.add('fixed');fixableItem.classList.remove("fixed--bottom");}else if (stopPoint + size >=footer.offsetTop){fixableItem.classList.add("fixed--bottom");fixableItem.classList.remove('fixed');}else{fixableItem.classList.remove("fixed--bottom");fixableItem.classList.remove('fixed');};});};};const hidingMenu=()=>{const scroll=window.pageYOffset || document.documentElement.scrollTop;const hideLinkHoliday=function (){if (elHoliday){if (scroll >=100){elHoliday.classList.add('holiday--hidden')}else{elHoliday.classList.remove('holiday--hidden')};};};hideLinkHoliday()
const scrollAsidePanel=function (element,topSize){if (element && breakpointTablet.matches===true){element.style.maxHeight='calc(100vh - ' + topSize + 'px)';};};const addAdStyleTop=function (adBlock){if (adBlock){adBlock.style.transition='top 0.3s';adBlock.classList.add('fixed-scroll-top')};};const removeAdStyleTop=function (adBlock){if (adBlock){adBlock.style.transition='top 0.3s';adBlock.classList.remove('fixed-scroll-top')};};const stickyMenuTop=function (element,size){if (element && breakpointTablet.matches===true){element.style.transition='top 0.3s';element.style.top=size + 'px';};};const hideMenu=function (){menuMobile.style.opacity=1;if (scroll >=350){menuMobile.style.opacity=0;};menuMobile.style.top='-190px';stickyMenuTop(containerSticky,0);stickyMenuTop(containerStickyHolidays,16);removeAdStyleTop(adLeft);removeAdStyleTop(adRight);scrollAsidePanel(setsListContainerScroll,0);scrollAsidePanel(setsListContainerScrollHolidays,52);check(0);};const openMenu=function (){menuMobile.style.opacity=1;menuMobile.style.top='-1px';stickyMenuTop(containerSticky,124);stickyMenuTop(containerStickyHolidays,140);addAdStyleTop(adLeft);addAdStyleTop(adRight);scrollAsidePanel(setsListContainerScroll,124);scrollAsidePanel(setsListContainerScrollHolidays,176);check(78);};let scrollTopSize=350;if (breakpointTablet.matches===false){scrollTopSize=200;}if (scroll >=lastScrollTop){lastScrollTop=scroll;lastScrollBottom=scroll;hideMenu();}else{lastScrollTop=scroll;if (lastScrollBottom - scrollTopSize >=lastScrollTop){openMenu();};};};window.addEventListener('scroll',hidingMenu,false);};scrollMenu();});